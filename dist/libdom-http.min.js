!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require(void 0)):"function"==typeof define&&define.amd?define("libdom-http",[],e):"object"==typeof exports?exports["libdom-http"]=e(require(void 0)):t["libdom-http"]=e(t[void 0])}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/assets/",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){(function(e){"use strict";var r=n(2),o=n(14),i=n(16),a=n(17),s=n(24),u=r.rehash,c=i.register,l=a.register,f=s.request;o.xhr&&(c("xhr",n(27)),c("xhr2",n(29))),l("text/plain",!0,n(30)),o.formdata&&l("multipart/form-data",!1,n(31)),r.env.browser&&c("form-upload",n(o.xhr&&o.file&&o.blob?29:32)),u(f,s,{request:"request"}),u(f,i,{driver:"register",use:"use"}),u(f,n(26),{parseHeader:"parse",eachHeader:"each"}),u(f,a,{transformer:"register",transform:"transform"}),a.chain=i.chain=f,e.libdom.http=f,t.exports=f.default=f}).call(e,function(){return this}())},function(t,e,n){"use strict";t.exports=n(3)},function(t,e,n){"use strict";var r=n(4),o=n(6),i=n(9),a={env:r};o.assign(a,n(7)),o.assign(a,o),o.assign(a,n(10)),o.assign(a,n(8)),o.assign(a,i),o.assign(a,n(11)),o.assign(a,n(12)),i.chain=a,a.Promise=n(13),t.exports=a.default=a},function(t,e,n){(function(e){"use strict";function r(){var t=n(5),e=p,r=["Node ",e.node,"(",t.platform,"; V8 ",e.v8||"unknown","; arch ",t.arch,")"];return r.join("")}function o(){}var i,a,s=e,u=s.document,c=s.window,l=Object.prototype.toString,f="[object Object]",d=!!u&&!!c&&c.self===(u.defaultView||u.parentWindow),p=!d&&function(){return n(5).versions||!1}(),h={},g=["log","info","warn","error","assert"],m={browser:d,nodejs:p&&!!p.node,userAgent:d?s.navigator.userAgent:p?r():"Unknown",validSignature:l.call(null)!==f||l.call(void 0)!==f,ajax:s.XMLHttpRequest,indexOfSupport:"indexOf"in Array.prototype};if(!s.console)for(i=0,a=g.length;a--;i++)h[g[i]]=o;t.exports=m,s=c=u=null}).call(e,function(){return this}())},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function i(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){g&&p&&(g=!1,p.length?h=p.concat(h):m=-1,h.length&&s())}function s(){if(!g){var t=o(a);g=!0;for(var e=h.length;e;){for(p=h,h=[];++m<e;)p&&p[m].run();m=-1,e=h.length}p=null,g=!1,i(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,f,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var p,h=[],g=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new u(t,e)),1!==h.length||g||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,n){"use strict";function r(){}function o(t,e,n){var r=i,o=c;return n&&o(n,r,t),o(e,r,t),t}function i(t,e){this[e]=t}function a(t,e,n){var r=[t,e];return c(n,s,r),r=r[0]=r[1]=null,t}function s(t,e){var n=this;n[0][e]=n[1][t],n=null}function u(t,e,n){var r=i,o=c;return n&&o(n,r,t,!1),o(e,r,t),t}function c(t,e,n,r){var o,i=C,a=r===!1;void 0===n&&(n=null);for(o in t)if((a||i.call(t,o))&&e.call(n,t[o],o,t)===!1)break;return t}function l(t,e){return C.call(t,e)}function f(t){return c(t,d,null,!0),t}function d(){delete arguments[2][arguments[1]]}function p(t,e,n){return c(e,h,t,n),t}function h(t,e){var n=this;l(n,e)||(n[e]=t),n=null}function g(t,e,n,r){var i,a,s,u,c,f,d,p=A.jsonPath(e),h=T,g=h.object,m=h.array,v=l,y=o,b=S,x=t,w=e;if(p)for(w=p[0],p.splice(0,1),s=-1,u=p.length;u--;)a=p[++s],i=b.test(a),v(x,w)?(c=x[w],d=m(c),d||g(c)?d&&!i&&(c=y({},c),delete c.length):i?c=[c]:(f=c,c={},c[""]=f)):c=i?[]:{},x=x[w]=c,a||(m(x)?a=x.length:0 in x&&(a="0")),w=a;return r!==!0&&v(x,w)&&(c=x[w],m(c)?(x=c,w=x.length):(x=x[w]=[c],w=1)),x[w]=n,x=n=c=f=null,t}function m(t,e){return r.prototype=t.prototype,T.object(e)?o(new r,e):new r}function v(t,e){return y(t,e,[])}function y(t,e,n){var r,o,i=T,a=i.object,s=i.array,u=i.regex,c=i.date,l=y,f=n.length;switch(!0){case t===e:return!0;case a(t):if(!a(e))return!1;if(n.lastIndexOf(t)!==-1&&n.lastIndexOf(e)!==-1)return!0;n[f]=t,n[f+1]=e;for(r in t)if(!(r in e&&l(t[r],e[r],n)))return!1;for(r in e)if(!(r in t&&l(t[r],e[r],n)))return!1;return n.length=f,!0;case s(t):if(!s(e))return!1;if(n.lastIndexOf(t)!==-1&&n.lastIndexOf(e)!==-1)return!0;if(o=t.length,o!==e.length)return!1;for(n[f]=t,n[f+1]=e;o--;)if(!l(t[o],e[o],n))return!1;return n.length=f,!0;case u(t):return u(e)&&t.source===e.source;case c(t):return c(e)&&t.toString()===e.toString()}return!1}function b(t,e){var n=T,r=n.nativeObject(t);return e=e===!0,r||n.array(t)?e?(r?x:w)(t,[],[]):r?u({},t):t.slice(0):n.regex(t)?new RegExp(t.source,t.flags):n.date(t)?new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()):t}function x(t,e,n){var r,o,i,a,s=e.length,u=T,c=u.nativeObject,l=u.array,f=w,d=x,p={};e[s]=t,n[s]=p;for(r in t)o=t[r],a=c(o),a||l(o)?(i=e.lastIndexOf(o),o=i===-1?(a?d:f)(o,e,n):n[i]):o=b(o,!1),p[r]=o;return e.length=n.length=s,p}function w(t,e,n){var r,o,i,a=e.length,s=T,u=s.nativeObject,c=s.array,l=w,f=x,d=[],p=0,h=t.length;for(e[a]=t,n[a]=d;h--;p++)r=t[p],i=u(r),i||c(r)?(o=e.lastIndexOf(r),r=o===-1?(i?f:l)(r,e,n):n[o]):r=b(r,!1),d[p]=r;return e.length=n.length=a,d}var j=Object.prototype,T=n(7),A=n(8),C=j.hasOwnProperty,S=/^[0-9]*$/;t.exports={each:c,assign:o,rehash:a,contains:l,instantiate:m,clone:b,compare:v,fillin:p,urlFill:g,clear:f}},function(t,e,n){"use strict";function r(t){return w.call(t)}function o(t){return null===t?"[object Null]":void 0===t?"[object Undefined]":w.call(t)}function i(t,e){return j(t)===e}function a(t){return w.call(t)===y}function s(t){return null!==t&&void 0!==t&&w.call(t)===y}function u(t){var e,n,r=b;return j(t)===y&&(e=t.constructor,r.hasOwnProperty.call(t,"constructor")?(delete t.constructor,n=t.constructor===r,t.constructor=e,n):e===r)}function c(t,e){return"string"==typeof t&&(e===!0||0!==t.length)}function l(t){return"number"==typeof t&&isFinite(t)}function f(t){switch(typeof t){case"number":return isFinite(t);case"boolean":case"string":return!0}return!1}function d(t){return"[object Function]"===w.call(t)}function p(t){return"[object Array]"===w.call(t)}function h(t){return"[object Date]"===w.call(t)}function g(t){return"[object RegExp]"===w.call(t)}var m=n(4),v=m.validSignature,y="[object Object]",b=Object,x=b.prototype,w=x.toString,j=v?r:o;t.exports={signature:j,object:v?a:s,nativeObject:u,string:c,number:l,scalar:f,array:p,method:d,date:h,regex:g,type:i}},function(t,e){"use strict";function n(t){var e,n,r,i,a,s,u=g,c=[],l=0,f=-1,d=!1,p=u.charAt(64);for(t=o(t),e=n=t.length;e--;){switch(r=t.charCodeAt(++f),i=f%3){case 0:s=u.charAt((252&r)>>2),d=(3&r)<<4;break;case 1:s=u.charAt(d|(240&r)>>4),d=(15&r)<<2;break;case 2:s=u.charAt(d|(192&r)>>6),d=63&r}if(c[l++]=s,a=!e,(a||2===i)&&(c[l++]=u.charAt(d)),!e){for(e=l%4,e=e&&4-e;e--;)c[l++]=p;break}}return c.join("")}function r(t){var e,n,r,o,a,s=g,u=p,c=[],l=0,f=-1,d=h;for(t=t.replace(m,""),e=t.length;e--;){switch(n=s.indexOf(t.charAt(++f)),a=f%4){case 0:o=0;break;case 1:o=(r<<2|n>>4)&u;break;case 2:o=(r<<4|n>>2)&u;break;case 3:o=(r<<6|n)&u}if(r=n,!e&&a<3&&o<64)break;a&&(c[l++]=d(o))}return i(c.join(""))}function o(t){for(var e,n=f,r=d,o=h,i=[],a=0,s=-1,u=t.length;u--;)e=t.charCodeAt(++s),e<n?i[a++]=o(e):e<2048?(i[a++]=o(192|e>>6),i[a++]=o(n|e&r)):e<55296||e>57343?(i[a++]=o(224|e>>12),i[a++]=o(n|e>>6&r),i[a++]=o(n|e&r)):(u--,e=65536+((1023&e)<<10|1023&t.charCodeAt(++s)),i[a++]=o(240|e>>18),i[a++]=o(n|e>>12&r),i[a++]=o(n|e>>6&r),i[a++]=o(n|e>>r));return i.join("")}function i(t){for(var e,n,r=f,o=d,i=h,a=[],s=Math,u=s.min,c=s.max,l=0,p=t.length,g=-1;p--;)e=t.charCodeAt(++g),e<r?a[l++]=i(e):e>191&&e<224?(a[l++]=i((31&e)<<6|t.charCodeAt(g+1)&o),n=c(u(p-1,1),0),g+=n,p-=n):e>223&&e<240?(a[l++]=i((15&e)<<12|(t.charCodeAt(g+1)&o)<<6|t.charCodeAt(g+2)&o),n=c(u(p-2,2),0),g+=n,p-=n):(e=((7&e)<<18|(t.charCodeAt(g+1)&o)<<12|(t.charCodeAt(g+2)&o)<<6|t.charCodeAt(g+3)&o)-65536,a[l++]=i(e>>10|55296,1023&e|56320),n=c(u(p-3,3),0),g+=n,p-=n);return a.join("")}function a(t){var e,n,r,o,i=[],a=0,s=[],u=a,c=!0,l=!1,f=l,d=l;for(e=-1,n=t.length;n--;){if(r=t.charAt(++e),o=!n,"["===r){if(f)break;f=c,u&&(d=c)}else if("]"===r){if(!f)break;f=l,d=c}else s[u++]=r,o&&(d=c);if(d&&(i[a++]=s.join(""),s.length=u=0,d=l),o){if(f||a<1)break;return i}}return null}function s(t){return t.replace(v,u)}function u(t){return t.charAt(t.length-1).toUpperCase()}function c(t){return t.replace(y,l)}function l(t){return"-"+t.charAt(t.length-1).toLowerCase()}var f=128,d=63,p=255,h=String.fromCharCode,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m=/[^a-zA-Z0-9\+\/]/,v=/[^a-z]+[a-z]/gi,y=/\-*[A-Z]/g;t.exports={encode64:n,decode64:r,utf2bin:o,bin2utf:i,jsonPath:a,camelize:s,uncamelize:c}},function(t,e,n){(function(e){"use strict";function r(t,e){var n,r,o=s(t),i=y;return o&&e instanceof Function&&(t=o[1],n=":"+t,n in i||(i[n]={name:t,before:[],after:[]}),r=i[n][a(o[0])],r[r.length]=e),x.chain}function o(t,e,n){var r,o,a=i(t);if(a)for("undefined"==typeof n&&(n=null),e instanceof Array||(e=[]),r=-1,o=a.length;o--;)a[++r].apply(n,e);return x.chain}function i(t){var e,n=y,r=s(t);if(r&&(e=":"+r[1],e in n))return n[e][a(r[0])]}function a(t){return t===m?"before":"after"}function s(t){var e,n,r=p.string(t)&&t.match(g);if(r)return n=r[1],e="before"===r[4]?m:v,[e,(n||"")+r[5]]}function u(t){var e,n,r,o=b;if(p.string(t))return e=t+".",e in o||(r=c(e),n=l(e),o[e]=n.chain=r.chain={run:r,register:n}),o[e]}function c(t){function e(n,r,i){return o(t+n,r,i),e.chain}return e}function l(t){function e(n,o){return r(t+n,o),e.chain}return e}function f(t){return setTimeout(t,1)}function d(t){return clearTimeout(t)}var p=n(7),h=e,g=/^(([^\.]+\.)*)((before|after)\:)?([a-zA-Z0-9\_\-\.]+)$/,m=1,v=2,y={},b={},x={register:r,run:o,middleware:u,setAsync:h.setImmediate,clearAsync:h.clearImmediate};h.setImmediate instanceof Function||(x.setAsync=f,x.clearAsync=d),t.exports=x.chain=x}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){for(var e=this,n=e.length,r=-1;n--;)if(t===e[++r])return e=null,r;return-1}function o(t){for(var e=this,n=e.length;n--;)if(t===e[n])return e=null,n;return-1}function i(t,e,n){var r,o,i,a;t=n!==!1?t:t.slice(0),t.push.apply(t,e),a=t.length;t:for(o=a;o--;)for(r=t[o],i=a;i--;)if(o!==i&&r===t[i]){a--,t.splice(o,1);continue t}return t}function a(t,e,n){var r,o,i,a=t.length,s=e.length;t=n!==!1?t:t.slice(0);t:for(o=a;o--;){r=t[o];e:for(i=s;i--;)if(r===e[i]){for(i=a;i--;)if(i!==o&&r===t[i])break e;continue t}t.splice(o,1),a--}return t}function s(t,e,n){var r,o,i,a=t.length,s=e.length;t=n!==!1?t:t.slice(0);t:for(o=a;o--;){for(r=t[o],i=s;i--;)if(r===e[i]){t.splice(o,1),a--;continue t}for(i=a;i--;)if(i!==o&&r===t[i]){t.splice(o,1),a--;continue t}}return t}var u=n(4),c=n(6),l=Array.prototype;u.indexOfSupport||c.assign(l,{indexOf:r,lastIndexOf:o}),t.exports={unionList:i,intersectList:a,differenceList:s}},function(t,e,n){"use strict";function r(){return new o}function o(){this.data={}}var i=n(7),a=n(6);o.prototype={constructor:o,get:function(t){var e=this.data;if(a.contains(e,t))return e[t]},set:function(t,e){var n=this.data;return(i.string(t)||i.number(t))&&(n[t]=e),this},unset:function(t){var e=this.data;return a.contains(e,t)&&delete e[t],this},exists:function(t){return a.contains(this.data,t)},clear:function(){return a.clear(this.data),this},clone:function(){var t=this.data;return a.clone(t,!0)}},t.exports={createRegistry:r}},function(t,e,n){"use strict";function r(t,e,n,r,o,i){var a,s,u,c,l,f="\\",d=".",p=[],h=0;for(a=-1,s=t.length;s--;){switch(u=t.charAt(++a),c=!1,l=!s,u){case f:u="",s&&(u=t.charAt(++a),s--);break;case d:u="",c=!0}if(u&&(p[h++]=u),(l||c)&&h){if(e(p.join(""),l,n,r,o,i)===!1)return;p.length=h=0}}}function o(t,e){var n=p;switch(!0){case n.object(t):case n.array(t)&&(!g.test(e)||"length"!==e):if(!h.contains(t,e))return!1}return!0}function i(t,e,n){var r=n[1];return o(r,t)?(n[e?0:1]=r[t],!0):(n[0]=void 0,!1)}function a(t,e){var n=[void 0,e];return r(t,i,n),n[1]=null,n[0]}function s(t,e,n){return h.clone(a(t,e),n)}function u(t,e,n){n[n.length]=t}function c(t,e,n,o){var i,a,s,c,l,f,d,m,v,y=p,b=h.contains,x=y.array,w=y.object,j=y.assign,T=e,A=g;if((w(T)||x(T))&&(r(t,u,i=[]),i.length)){for(l=i[0],i.splice(0,1),a=-1,s=i.length;s--;)c=i[++a],f=A.test(c),b(T,l)?(d=T[l],m=x(d),m||w(d)?m&&!f&&(d=j({},d),delete d.length):f?d=[d]:(v=d,d={},d[""]=v)):d=f?[]:{},T=T[l]=d,l=c;return o!==!0&&b(T,l)&&(d=T[l],x(d)?(T=d,l=T.length):(T=T[l]=[d],l=1)),T[l]=n,T=n=d=v=null,!0}return!1}function l(t,e,n){var r,i=n[0];return!!o(i,t)&&void(e?(p.array(i)?(r="length"===t,i.splice(r?0:t.toString(10),r?i.length:1)):delete i[t],n[1]=!0):n[0]=i[t])}function f(t,e){var n=[e,!1];return r(t,l,n),n[0]=null,n[1]}function d(t,e,n){return h.compare(a(t,e),e,n)}var p=n(7),h=n(6),g=/^([1-9][0-9]*|0)$/;t.exports={jsonFind:a,jsonCompare:d,jsonClone:s,jsonEach:r,jsonSet:c,jsonUnset:f}},function(t,e,n){(function(e){"use strict";function r(t){var e=d;return e.object(t)&&e.method(t.then)}function o(t){var e=s;return t instanceof e||(t=p.instantiate(e)),t.__state=[null,void 0,[],null,null],t}function i(t,e){function n(t){try{e(!0,t)}catch(t){e(!1,t)}}r(t)?t.then(n,function(t){e(!1,t)}):n(t)}function a(t,e,n){var r=t.__state,o=r[b];for(r[v]=e,r[y]=n;o.length;)o[0](e,n),o.splice(0,1)}function s(t){function e(t,e){a(s,t,e)}function n(t){u||(u=!0,i(t,e))}function r(t){u||(u=!0,e(!1,t))}var s=o(this),u=!1;try{t(n,r)}catch(t){r(t)}return s}function u(t){return new s(function(e){e(t)})}function c(t){return new s(function(){arguments[1](t)})}function l(t){var e;return t=g.call(t,0),e=t.length,e?new s(function(n,r){function o(t,e){function o(e,o){var i=f;if(!u){if(!e)return r(o),void(u=!0);i[t]=o,--s||n(i)}}i(e,o)}var a=t,s=e,u=!1,c=s,l=0,f=[];for(f.length=c;c--;l++)o(l,a[l])}):u([])}function f(t){return t=g.call(t,0),new s(function(e,n){function r(t,r){o||(o=!0,(t?e:n)(r))}for(var o=!1,a=i,s=t,u=-1,c=s.length;c--;)a(s[++u],r)})}var d=n(7),p=n(6),h=n(9),g=Array.prototype.slice,m=e,v=0,y=1,b=2;s.prototype={constructor:s,then:function(t,e){function n(n,r){var o=n?t:e;if(d.method(o))try{return r=o(r),void i(r,function(t,e){a(l,t,e)})}catch(t){r=t,n=!1}a(l,n,r)}var r=this,s=r.__state,u=s[v],c=s[b],l=o();return null===u?c[c.length]=n:h.setAsync(function(){n(u,s[y])}),l},catch:function(t){return this.then(null,t)}},p.assign(s,{all:l,race:f,reject:c,resolve:u}),d.method(m.Promise)||(m.Promise=s),t.exports=s,m=null}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";var r=n(15),o=r.env,i=e,a=i.XMLHttpRequest,s=!!a,u=!1,c=!1,l=!1,f=!1,d=!1,p=!!i.XDomainRequest;o.browser?a&&(a=a.prototype,u="withCredentials"in a,c="overrideMimeType"in a,l="timeout"in a,f="sendAsBinary"in a,d="onprogress"in a):o.node,t.exports={xhr:s,xhrx:u,xhrmime:c,xhrtime:l,xhrbin:f,xhrbytes:d,xdr:p,formdata:!!i.FormData,file:!!i.File,blob:!!i.Blob},i=a=null}).call(e,function(){return this}())},function(e,n){e.exports=t},function(t,e,n){"use strict";function r(t,e){var n=s;return n.string(t)&&n.method(e)&&(u.set(t,e),e.prototype.type=t,c||(c=t)),l.chain}function o(t){return u.exists(t)}function i(t){return arguments.length>0&&o(t)&&(c=t),c}function a(t){return u.get(t)}var s=n(2),u=s.createRegistry(),c=null,l={register:r,exists:o,use:i,get:a};t.exports=l.chain=l},function(t,e,n){"use strict";function r(t,e,n){var r,o,i,d=a,p=u,h=l;return d.method(n)&&(t=s.parse(t),t&&(i="all"===e,e=e===!0?c:h,r=e+t.root,o=e+t.string,o===r||p.exists(r)||p.set(r,n),p.set(o,n),i&&p.set(h+t.string,n))),f.chain}function o(t,e,n){var r,o=u;if(t=s.parse(t)){if(e=e===!0?c:l,r=e+t.string,o.exists(r))return o.get(r)(n);if(r=e+t.root,o.exists(r))return n=o.get(r)(n),a.array(n)?n:[null,null]}return[null,n]}var i,a=n(2),s=n(18),u=a.createRegistry(),c="request-",l="response-",f={register:r,transform:o};t.exports=f.chain=f,i=n(19),r("application/json",!1,i).register("text/x-json",!1,i),i=n(21),r("application/json",!0,i).register("text/x-json",!0,i),r("application/x-www-form-urlencoded",!1,n(22)).register("multipart/form-data",!1,n(23))},function(t,e,n){"use strict";function r(t){var e,n,r,u,c,l,f,d=i,p=a,h=s,g=o,m="; ",v=null;if(g.string(t)&&d.test(t)){if(e=t.match(d),t=e[1].toLowerCase(),n=e[2].toLowerCase(),r=e[3]||""){for(v={},r=r.split(";"),l=r.length;l--;)e=r[l].match(p),e&&(u=e[1].toLowerCase(),c=e[2],r[l]=u+"="+c,v[u]=h.test(c)?c.substring(1,c.length-1):c);r=r.join(m)}return f=t+"/"+n,{string:f+(r?m+r:""),root:f,type:t,subtype:n,params:v}}}var o=n(2),i=/^([a-z0-9\-\_]+)\/([a-z\-\_0-9]+)(([ \s\t]*\;([^\;]+))*)$/,a=/^[ \t\s]*([a-z0-9\-\_]+)\=(\"([^\"]+)\"|[a-z0-9\-\_]+)[ \t\s]*$/,s=/^\"[^\"]+\"/,u={parse:r};t.exports=u},function(t,e,n){"use strict";function r(t,e,n,r,o){var s=i,u=t.returnValue,c="field"===r;if(c){if("file"===o)return;n=n.value}"number"===n?n=isFinite(n)?n.toString(10):"":s.string(n)||(n=a.jsonify(n)),c||"field-options"===r?s.urlFill(u,e,n):u[e]=n,u=n=null}function o(t){var e=a,n={index:{},returnValue:{}},o=e.each(t,r,n);return[null,e.jsonify(o)]}var i=n(2),a=n(20);t.exports=o},function(t,e,n){(function(e){"use strict";function r(t){return u.is(t,1)&&"FORM"===t.tagName.toUpperCase()}function o(t){if(u.is(t,1))switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":case"BUTTON":case"SELECT":case"OUTPUT":return!0}return!1}function i(t,e,n){var i,s,u,d=c,p=l,h=f,g=null,m=a,v=d.object,y=d.contains,b=v(t);if(r(t)?(t=t.elements,g=h,b=!1):o(t)?(g=h,t=[t]):b?g=p:d.array(t)&&(g=h,b=!1),v(n)||(n={}),y(n,"returnValue")||(n.returnValue=null),b||g===h)if(b)for(u in t)y(t,u)&&m(t[u],u,e,n);else for(i=-1,s=t.length;s--;)m(t[++i],null,e,n);return n.returnValue}function a(t,e,n,r){var i,a,s,u,l,f=c,d=f.string,p=d(e),h="variant";if(o(t)){if(!p&&!d(e=t.name))return;switch(i="field",p=!0,h=t.type,t.tagName.toUpperCase()){case"BUTTON":d(h)||(h="button");break;case"SELECT":for(i="field-options",h="select",u=t.options,a=-1,s=u.length;s--;)l=u[++a],l.selected&&n(r,e,l.value,i,h);return void(u=l=null);case"TEXTAREA":h="text"}switch(h){case"checkbox":case"radio":if(!t.checked)return}}else switch(!0){case f.array(t):i="array";break;case f.date(t):i="date";break;default:i=typeof t}p&&n(r,e,t,i,h)}function s(t){var n=e.JSON,r=null;if(!n)throw new Error("JSON is not supported in this platform");try{r=n.stringify(t)}catch(t){}return"null"===r||null===r?"":r}var u=n(15),c=n(2),l=1,f=2;t.exports={each:i,form:r,field:o,jsonify:s}}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";function r(t){if(!i)throw new Error("JSON is not supported in this platform");if(!o.string(t))return null;try{t=i.parse(t)}catch(t){return null}return[null,t]}var o=n(2),i=e.JSON;i||(i=!1),t.exports=r}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e,n,r,o){var a=t.returnValue;if("field"===r){if("file"===o)return;n=n.value}"number"==typeof n?n=isFinite(n)?n.toString(10):"":"string"!=typeof n&&(n=i.jsonify(n)),a[a.length]=e+"="+encodeURIComponent(n)}function o(t){var e=i.each(t,r,{returnValue:[]});return[null,e.join("&")]}var i=n(20);t.exports=o},function(t,e,n){"use strict";function r(){for(var t=Math.random().toString().substr(2),e=[],n=0,r=u-t.length;r--;)e[n++]="-";return e[n++]=t,e.join("")}function o(t,e,n,r,o){var i=s,u=t.returnValue;if("field"===r){if("file"===o)return;n=n.value}"number"==typeof n?n=isFinite(n)?n.toString(10):"":"string"!=typeof n&&(n=a.jsonify(n)),u[u.length]=['Content-Disposition: form-data; name="'+e+'"',"Content-type: application/octet-stream",i,n].join(i)}function i(t){var e=s,n=r(),i=a.each(t,o,{returnValue:[]});return i.length||i.splice(0,0,n),[["Content-Type: multipart/form-data; charset=utf-8;","    boundary="+n].join(e),n+e+i.join(e+n+e)+n+"--"+e]}var a=n(20),s="\r\n",u=48;t.exports=i},function(t,e,n){"use strict";function r(t){return c.string(t)&&(t=t.toLowerCase(),h.indexOf(t)!==-1)?t:p.get("method")}function o(t){var e=t.driver,n=l;return c.run("libdom-http.driver.resolve",[t,e]),e=t.driver,n.exists(e)?e:n.use()}function i(t,e){var n,o=c,i=o.string;n=t.getAttribute("enctype")||t.getAttribute("encoding"),i(n)&&e.addHeaders("Content-type: "+n),n=t.action,i(n)&&(e.url=n),n=t.method,i(n)&&(e.method=r(n)),n=t.getAttribute("data-driver"),i(n)&&(e.driver=n),n=t.getAttribute("data-response-type"),i(n)&&(e.responseType=n),e.data=t}function a(t,e){var n,o=c,a=o.string,s=d,u=void 0;n=t.form||t.data||t.params||t.body,s.form(n)?i(n,e):null===n&&n===u||(e.item=n),n=t.query||t.urlData||t.urlParams,(s.form(n)||null!==n&&n!==u)&&(e.query=n),n=t.url,a(n)&&(e.url=n),n=t.method,a(n)&&(e.method=r(n)),n=t.driver,a(n)&&(e.driver=n),n=t.responseType,a(n)&&(e.responseType=n),e.addHeaders(t.headers),e.config=t,n=null}function s(t,e){var n,r,s=c,u=d,h=s.string,m=s.object,v=a,y=new f,b=Promise;return v(p.clone(),y),h(t)?(m(e)?v(e,y):u.form(e)&&i(e,y),y.url=t):m(t)?v(t,y):u.form(t)&&i(t,y),g.indexOf(y.method)===-1&&(y.allowedPayload=!1),h(y.url)&&(n=o(y))?(n=new(l.get(n))(y),y.driver=n,r=b.resolve(y).then(n.setup).then(n.transport).then(n.success).catch(n.error),y.api=r,y=n=null,r):b.reject("Invalid HTTP request configuration.")}function u(t,e){var n=p;return arguments.length>1?(n.set(t,e),m.chain):n.get(t)}var c=n(2),l=n(16),f=n(25),d=n(20),p=c.createRegistry(),h=["get","post","put","patch","delete","options"],g=["post","put","patch"],m={request:s,defaults:u};t.exports=m,l.use("xhr"),p.set("method","get"),p.set("headers",{accept:"application/json,text/x-json,text/plain,*/*;q=0.8","content-type":"application/json"})},function(t,e,n){"use strict";function r(t,e){var n,r=t.match(b);return r&&l.string(e)?(n=r[2],r[2]=(n?n+"&":"?")+e,r[3]=r[3]||"",r.slice(1).join("")):t}function o(t){var e,n,r,o,i,a=y,s=v;if(!h){for(h=!0,r=(new Date).getTime(),o=m,t=t===!0,e=a.length;e--;)n=a[e],t?n.destroy():n.destroyed||(i=n.createdAt,!i||n.processing?n.createdAt=r:i+o<r&&n.destroy()),n.destroyed&&a.splice(e,1);!a.length&&s&&(clearInterval(s),v=!1),h=!1}}function i(t){var e=v;t===!0?(e&&(clearInterval(e),v=!1),o(t)):e||(v=setInterval(o,g))}function a(){i(!0)}function s(){c.apply(this,arguments)}function u(){c.apply(this,arguments)}function c(){var t=y,e=this;e.destroyed=!1,t[t.length]=e,i()}var l=n(2),f=n(15),d=n(26),p=n(17),h=!1,g=1e3,m=1e4,v=!1,y=[],b=/^([^\?\#]+)(\?[^\?\#]*)?(\#.*)?$/;c.prototype={createdAt:void 0,contentType:"application/octet-stream",headers:null,body:null,data:null,destroyed:!0,processing:!1,constructor:c,begin:function(){var t=this;return t.destroyed||t.processing||(t.processing=!0,delete t.createdAt,i()),t},end:function(){var t=this;return!t.destroyed&&t.processing&&(delete t.processing,delete t.createdAt,i()),t},addHeaders:function(t){var e,n,r=this,o=l;return t=d.parse(t),t&&(e=r.headers,o.object(e)?o.assign(e,t):r.headers=t,n=r.header("content-type"),n?r.contentType=n:delete r.contenType),this},header:function(t){var e=this,n=e.headers,r=l;return r.string(t)&&r.object(n)&&(t=d.headerName(t),r.contains(n,t))?n[t]:null},destroy:function(){var t=this;return t.destroyed||(t.destroyed=!0,l.clear(t)),t}},s.prototype=l.instantiate(c,{url:null,method:"get",constructor:s,response:null,aborted:!1,timeout:0,config:null,queryTransformer:"application/x-www-form-urlencoded",queryAllowed:!0,allowedPayload:!0,getUrl:function(){var t=this,e=l.string,n=p.transform,o=t.url,i=t.query,a=t.data,s=t.queryTransformer,u=r;return t.queryAllowed&&e(o)&&e(s)&&(i=n(s,!1,i)[1],e(i)&&(o=u(o,i)),t.allowedPayload===!1&&(a=n(s,!1,a)[1],e(a)&&(o=u(o,a)))),o},settings:function(t){var e=this.config,n=l;if(n.object(e)&&n.contains(e,t))return e[t]},process:function(){var t=this,e=p.transform(t.header("content-type"),!1,t.data),n=e[0],r=t.responseType,o=t.response;n&&t.addHeaders(n),t.allowedPayload===!1?delete t.body:t.body=e[1],o&&o.destroy(),t.response=o=new u,l.string(r)&&o.addHeaders("Content-type: "+r),o.request=t,o.begin(),e=null}}),u.prototype=l.instantiate(c,{constructor:u,status:0,statusText:"Uninitialized",process:function(){var t=this,e=p.transform(t.header("content-type"),!0,t.body),n=e[0];n&&t.addHeaders(n),t.data=e[1]}}),f.destructor(a),t.exports=s},function(t,e,n){"use strict";function r(t){return t?t.charAt(0).toUpperCase()+t.substring(1,t.length).toLowerCase():""}function o(t,e,n){var o,i,a,s,u,v=t.split(l),y=f,b=d,x=p,w=h,j=g,T=m,A=":",C="$1",S=c.contains,q=r,P=v.length,O=-1,R={},F=[],k=0,L=null;for("undefined"==typeof n&&(n=null);P--;)if(o=v[++O],!O&&x.test(o)||w.test(o))F[k++]="",R[""]=o;else if(y.test(o)){if(i=o.indexOf(A),L=o.substring(0,i),a=o.substring(i+1,o.length).replace(j,C),!a)continue;L=q(L),u=S(R,L),u||(F[k++]=L),T.test(L)?(u||(R[L]=[]),s=R[L],s[s.length]=a):R[L]=a}else L&&b.test(o)&&(a=o.replace(j,C),T.test(L)?(s=R[L],s[s.length-1]+=" "+a):R[L]+=" "+a);for(O=-1,P=F.length;P--;)L=F[++O],e.call(n,L,R[L])}function i(t,e,n,i){var a,s,l,f=c,d=f.string,p=f.number,h=f.array,g=f.contains,v=u,y=m,b=r;if(f.array(t)&&(t=v(t.slice(0)).join("\r\n")),d(t))o(t,e,n,i);else{if(!f.object(t))return!1;"undefined"==typeof n&&(n=null);for(a in t)g(t,a)&&(s=t[a],a=b(a),d(s)||p(s)?e.call(n,a,y.test(a)?[s]:s):h(s)&&(s=v(s.slice(0)),y.test(a)||(l=s.length,s=l?s[l-1]:""),s.length&&e.call(n,a,s)))}return!0}function a(t){var e={};return i(t,s,e)&&e}function s(t,e){this[t]=e}function u(t){for(var e,n=c,r=n.string,o=n.number,i=t.length;i--;)e=t[i],o(e)?t[i]=e.toString(10):r(e)||t.splice(i,1);return t}var c=n(2),l=/\r\n|\r|\n/,f=/^([^ \r\n\t\s\:]+)\:(.+)$/,d=/^([ \r\n\t\s]+.+|[^\:]+)$/,p=/^([a-z]+)[ \t\s]+(\/[^\:]+)[ \t\s]+(HTTP\/[0-9]+\.[0-9]+)$/i,h=/^(HTTP\/[0-9]+.[0-9]+)[ \t\s]+([0-9]+)[ \t\s]+([a-z0-9\-\_]+)$/i,g=/^[ \t\s]*(.+)[ \t\s]*$/,m=/Set\-cookie/i,v={each:i,parse:a,headerName:r};t.exports=v},function(t,e,n){(function(e){"use strict";function r(t,e){var n,r,o=this;for(i.array(t)||(t=[t]),n=-1,r=t.length;r--;)o.setRequestHeader(e,t[++n])}function o(){var t=this,e=[t];a.apply(t,arguments),s.run("after:instantiated",e),e=e[0]=null}var i=n(2),a=n(28),s=i.middleware("libdom-http.driver.xhr"),u=0,c=1,l=2,f=3,d=4,p=a.prototype;o.prototype=i.instantiate(a,{level:1,bindMethods:p.bindMethods.concat(["onReadyStateChange"]),constructor:o,onReadyStateChange:function(){var t,e=this,n=e.request,r=n.xhrTransport,o=s.run,i=[e,n],a=n.resolve,p=n.reject;if(!n.aborted&&a&&p){switch(o("before:readystatechange",i),r.readyState){case u:case c:case l:case f:break;case d:t=r.status,t<200||t>299?p(t):a(t)}o("after:statechange",i)}e=r=n=i=i[0]=i[1]=null},createTransportPromise:function(t){function e(e,n){var r=t;r.resolve=e,r.reject=n,r=null}return new Promise(e)},onSetup:function(t){var n=this,r=[n,t],o=s.run,i=new e.XMLHttpRequest;t.xhrTransport=i,o("before:setup",r),i.onreadystatechange=n.onReadyStateChange,i.open(t.method.toUpperCase(),t.getUrl(),!0),o("after:setup",r),i=r=r[0]=r[1]=null},onTransport:function(t){var e=this,n=i,o=t.xhrTransport,a=t.headers,u=[e,t];s.run("before:request",u),t.transportPromise=e.createTransportPromise(t),a=t.headers,n.object(a)&&n.each(a,r,o),o.send(t.body),s.run("after:request",u),o=u=u[0]=u[1]=null},onSuccess:function(t){var e=this,n=t.xhrTransport,r=t.response,o=[e,t],i=s.run;r.status=n.status,r.statusText=n.statusText,r.addHeaders(n.getAllResponseHeaders()),r.body=n.responseText,i("after:response",o),n=o=o[0]=o[1]=null},onCleanup:function(t){var e,n=this,r=t.xhrTransport;r&&(e=[n,t],s.run("after:cleanup",e),e=e[0]=e[1]=r=r.onreadystatechange=null),t.transportPromise=t.resolve=t.reject=t.xhrTransport=r=null}}),t.exports=o}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e){function n(){return e.apply(t,arguments)}return n}function o(){for(var t,e=this,n=this.bindMethods,o=n.length,i=r;o--;)t=n[o],e[t]=i(e,e[t])}var i=n(2);o.prototype={bindMethods:["setup","transport","process","success","error"],aborted:!1,request:null,response:null,constructor:o,onSetup:function(t){},onTransport:function(t){},onCleanup:function(t){},onSuccess:function(t,e){},onError:function(t){},setup:function(t){var e=this;return e.request=t,e.onSetup(t),t.process(),e.response=t.response,t},transport:function(t){var e;return this.onTransport(t),e=t.transportPromise,e&&i.method(e.then)?(t.begin(),e):Promise.reject(610)},success:function(t){var e=this,n=e.request,r=n&&n.response;return 0===t||t<200&&t>299||!n||!r?e.error(t):(e.onSuccess(n,t),r.process(),n.end(),r.end(),n.transportPromise=null,e.onCleanup(n,r),delete e.request,r)},error:function(t){var e=this,n=e.request,r=n&&n.response;return e.onError(t),n&&(n.transportPromise=null,e.onCleanup(n),n.end()),r&&r.end(),delete e.request,Promise.reject(t)},abort:function(){}},t.exports=o},function(t,e,n){(function(e){"use strict";function r(t,e){var n=e.settings("timeout");c.number(n)&&n>10&&(e.xhrTransport.timeout=n)}function o(t,e){e.settings("withCredentials")===!0&&(e.xhrTransport.withCredentials=!0)}function i(t){var e,n=this,r=n.request,o=r.api;r&&t.lengthComputable&&(e=t.loaded/t.total,r.percentLoaded=e,o&&(o.percentLoaded=e))}function a(t,e){var n=e.api;n.percentLoaded=0,e&&(e.percentLoaded=0),l.on(e.xhrTransport,"progress",t.onProgress)}function s(t,e){b&&l.un(e.xhrTransport,"progress",t.onProgress)}function u(t,n){n.body instanceof e.FormData&&delete n.headers["Content-type"]}var c=n(2),l=n(15),f=n(14),d=c.middleware("libdom-http.driver.xhr"),p=d.register,h="before:request",g=n(27),m=g.prototype,v=m.bindMethods,y=v.length,b=f.xhrbytes,x=0;f.xhrx&&(x++,p(h,o)),f.formdata&&(x++,p(h,u)),b&&(x++,v[y++]="onProgress",m.onProgress=i,p(h,a)),f.xhrtime&&p(h,r),x&&(x>2&&(m.level=2),p("cleanup",s)),t.exports=g}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){var e=o;return e.number(t)&&(t=t.toString(10)),["Content-type: text/plain",e.string(t)?t:""]}var o=n(2);t.exports=r},function(t,e,n){(function(e){"use strict";function r(t,e,n,r,o){var s,u,c,l,f=t.returnValue,d=i.string;if("field"===r){if("file"===o){for(s=n.files,u=-1,c=s.length;c--;)n=s[++u],l=n.name,d(l)?f.append(e,n,l):f.append(e,n);return void(f=null)}n=n.value}"number"==typeof n?n=isFinite(n)?n.toString(10):"":"string"!=typeof n&&(n=a.jsonify(n)),f.append(e,n),f=null}function o(t){return[null,a.each(t,r,{returnValue:new e.FormData})]}var i=n(2),a=n(20);t.exports=o}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";function r(t,n,r,i){var a,s=e.document,u="libdom-http-oldschool-form"+ ++g,c=s.createElement("div");return c.style.cssText=["visibility: hidden","position: fixed","top: -10px","left: -10px","overflow: hidden","height: 1px","width: 1px"].join(";"),c.innerHTML=['<form id="',u,'"',' method="',t.toUpperCase(),'"',' action="',encodeURI(n),'"',' target="',u,'-result"',' enctype="',r,'"',' encoding="',r,'"',' data-readystate="uninitialized">','<iframe name="',u,'-result"',' id="',u,'-result">',' src="'+i+'">',"</iframe>","</form>"].join(""),a=c.firstChild.firstChild,l.on(a,"load",o),s.body.appendChild(c),s=c=a=null,u}function o(t){var e=l,n=t.target,r=n.parentNode;e.un(n,"load",o),r.setAttribute("data-readystate","ready"),e.dispatch(r,"libdom-http-ready",{}),
e=n=r=null}function i(t){return e.document.getElementById(t)}function a(t,e,n,r,o){var i,a=c,s=t.impostors,u=t.fragment,d="field"===r,p=d&&"file"===o,h=null;p&&n.value?(i=n.parentNode,i&&(h=n.cloneNode(),h.disabled=!0,h.readOnly=!0,s[s.length]=[n,h],l.replace(n,h)),h=n,t.files=!0):p||(d&&(n=n.value),"number"===n?n=isFinite(n)?n.toString(10):"":a.string(n)||(n=f.jsonify(n)),h=u.ownerDocument.createElement("input"),h.type="hidden",h.name=e,h.value=n),h&&u.appendChild(h),u=i=h=null}function s(t){var e,n,r,o,i;for(e=t.length;e--;)n=t[e],r=n[0],o=n[1],i=o.parentNode,i&&i.replaceChild(r,o),i=n=n[0]=n[1]=r=o=null}function u(){var t=this;d.apply(t,arguments)}var c=n(2),l=n(15),f=n(20),d=n(28),p=d.prototype,h=/(^<pre>|<\/pre>$)/gi,g=0;u.prototype=c.instantiate(d,{constructor:u,blankDocument:"about:blank",defaultType:"application/json",bindMethods:p.bindMethods.concat(["onFormReady","onFormDeferredSubmit","onRespond"]),createTransportPromise:function(t){function e(e,n){var r=t;r.resolve=e,r.reject=n}return new Promise(e)},onFormReady:function(){var t=this,e=l,n=t.request,r=n.form;e.un(r,"libdom-http-ready",t.onFormReady),r.enctype=r.encoding=n.contentType,n.deferredSubmit=setTimeout(t.onFormDeferredSubmit,10),r=null},onFormDeferredSubmit:function(){var t=this,e=t.request,n=e&&e.form;n?(l.on(e.iframe,"load",t.onRespond),n.submit()):e&&e.reject(408),e=n=null},onRespond:function(){var t=this,e=t.request,n=e.iframe,r=!1,o="";l.un(n,"load",t.onRespond);try{o=n.contentWindow.document.body.innerHTML,r=!0}catch(t){}r?(e.formResponse=o.replace(h,""),e.resolve(200)):e.reject(406),n=null},onSetup:function(t){var n=this,o=c,s=[],u=r(t.method,t.getUrl(),t.contentType,n.blankDocument),l=i(u),d={impostors:s,fragment:e.document.createDocumentFragment(),files:!1,driver:n,request:t},p=t.responseType;f.each(t.data,a,d),l.appendChild(d.fragment),t.form=l,t.iframe=l.firstChild,t.impostors=d.impostors,t.fileUpload=d.files,o.string(p)||(t.responseType=n.defaultType),o.clear(d),t.transportPromise=n.createTransportPromise(t),l=null},onTransport:function(t){var e=t.form,n="application/x-www-form-urlencoded";t.fileUpload&&(n="multipart/form-data"),t.addHeaders("Content-type: "+n),"ready"===e.getAttribute("data-readystate")?this.onFormReady():l.on(e,"libdom-http-ready",this.onFormReady)},onSuccess:function(t){var e=this,n=e.response,r=t.formResponse;c.string(r)&&(n.body=r)},onCleanup:function(t){var e=t.impostors,n=t.form;c.array(e)&&s(e),n&&l.remove(n.parentNode||n),t.transportPromise=t.resolve=t.reject=t.form=n=null}}),t.exports=u}).call(e,function(){return this}())}])});